<fieldset class="module aligned {{ fieldset.classes }} flex flex-col gap-3 dark:text-white">
  {% if fieldset.name %}
    <h2 class="text-xl font-semibold text-gray-800 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">{{ fieldset.name }}</h2>
  {% endif %}

  {% if fieldset.description %}
    <div class="description text-sm text-gray-500 dark:text-white">{{ fieldset.description|safe }}</div>
  {% endif %}

  {% for line in fieldset %}
    <div class="form-row flex flex-col gap-2 {% if line.fields|length == 1 and line.errors %} errors{% endif %}{% if not line.has_visible_field %} hidden{% endif %}{% for field in line %}{% if field.field.name %} field-{{ field.field.name }}{% endif %}{% endfor %}">
      
      {% for field in line %}
        <div class="flex flex-col flex-1 gap-4">
          <label for="{{ field.field.id_for_label }}" class="block text-sm font-medium text-gray-700 dark:text-white">
            {{ field.field.label }}
          </label>
          
          {% if field.is_readonly %}
              <div class="text-sm text-gray-900 dark:text-gray-300 py-2">
                  <p>{{ field.contents }}</p>
              </div>
          {% else %}
              {{ field.field }}
          {% endif %}

          {% if field.field.errors %}
          <div class="text-sm text-error-500">
            {{ field.field.errors }}
          </div>
          {% endif %}

          {% if field.field.help_text %}
            <p class="text-xs text-gray-500 dark:text-white">{{ field.field.help_text|safe }}</p>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% endfor %}
</fieldset>