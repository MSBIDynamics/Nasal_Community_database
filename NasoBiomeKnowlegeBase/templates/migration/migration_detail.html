{% extends 'base.html' %}
{% load extras %}
{% block title %}Migration: {{ migration.species.name }}{% endblock %}
{% block page_title %}Edit Migration: {{ migration.species.name|truncate }}: {{ migration.from_site.name|truncate }} → {{ migration.to_site.name|truncate }}{% endblock %}
{% block content %}
<div class="max-w-2xl">
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Edit Migration</h1>
    <p class="text-gray-600 dark:text-gray-400">Update details for <span class="font-medium">{{ migration.species.name }}: {{ migration.from_site.name }} → {{ migration.to_site.name }}</span>.</p>
  </div>
  {% url 'get_all_migrations' as cancel_url %}
  {% include "partials/form.html" with form=form cancel_url=cancel_url submit_buttons_partial="partials/edit_form_buttons.html" %}

  <div 
    x-data="{ open: false }"
    @open-delete-dialog.window="open = true"
    x-show="open"
    class="fixed inset-0 z-50 overflow-y-auto"
    style="display: none;"
    x-cloak
  >
    {% include "partials/delete_confirmation.html" with table_name="Migration" table_item=migration.species.name|add:" "|add:migration.from_site.name|add:" → "|add:migration.to_site.name %}
  </div>

  <form method="POST" id="delete-form" x-cloak>
    {% csrf_token %}
    <input type="hidden" name="delete" value="1">
  </form>
</div>
{% endblock %}